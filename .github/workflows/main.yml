# ============================================================
# ğŸš€ TESLABTC.KG â€” Flujo de CI sin despliegue automÃ¡tico (v5.2.0)
# ============================================================

name: ğŸš« Despliegue manual en Fly.io (control local)

on:
  # 1ï¸âƒ£ Cada vez que hagas un push a la rama principal (solo validaciÃ³n)
  push:
    branches:
      - main

  # 2ï¸âƒ£ Permite ejecutarlo manualmente desde la pestaÃ±a "Acciones"
  workflow_dispatch:

  # 3ï¸âƒ£ Programa una ejecuciÃ³n automÃ¡tica mensual (solo validaciÃ³n)
  schedule:
    - cron: '0 9 1 * *'

jobs:
  validate:
    name: ğŸ§  Validar proyecto TESLABTC.KG (sin deploy)
    runs-on: ubuntu-latest

    steps:
      # 1ï¸âƒ£ Descargar el cÃ³digo del repositorio
      - name: ğŸ“¦ Descargar cÃ³digo
        uses: actions/checkout@v4

      # 2ï¸âƒ£ Instalar Flyctl (por compatibilidad, sin ejecutar deploy)
      - name: ğŸ”§ Instalar Flyctl
        uses: superfly/flyctl-actions/setup-flyctl@master

      # 3ï¸âƒ£ Mensaje informativo (sin subir nada)
      - name: ğŸ›‘ Omitir despliegue automÃ¡tico
        run: |
          echo "ğŸš« Despliegue automÃ¡tico desactivado"
          echo "ğŸ‘‰ Para desplegar manualmente, usa desde tu PC:"
          echo ""
          echo "   fly deploy --app teslabtc-api --remote-only --no-cache"
          echo ""
          echo "ğŸ§© Control total del despliegue ahora es local."
